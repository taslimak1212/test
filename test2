<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Simple Chess</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
}

.board {
    display: grid;
    grid-template-columns: repeat(8, 70px);
    width: 560px;
    margin: 20px auto;
    border: 3px solid black;
}

.square {
    width: 70px;
    height: 70px;
    font-size: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.light { background: #f0d9b5; }
.dark { background: #b58863; }

.selected {
    outline: 3px solid red;
}

#status {
    font-size: 20px;
    margin-top: 10px;
}
</style>
</head>

<body>

<h1>Simple Chess</h1>
<div id="board" class="board"></div>
<div id="status">White's turn</div>

<script>
const boardElement = document.getElementById("board");
const statusText = document.getElementById("status");

let currentPlayer = "white";
let selectedSquare = null;

const pieces = {
    r: "♜", n: "♞", b: "♝", q: "♛", k: "♚", p: "♟",
    R: "♖", N: "♘", B: "♗", Q: "♕", K: "♔", P: "♙"
};

let board = [
["r","n","b","q","k","b","n","r"],
["p","p","p","p","p","p","p","p"],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["P","P","P","P","P","P","P","P"],
["R","N","B","Q","K","B","N","R"]
];

function drawBoard() {
    boardElement.innerHTML = "";

    for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {

            const square = document.createElement("div");
            square.classList.add("square");
            square.classList.add((row + col) % 2 === 0 ? "light" : "dark");

            square.dataset.row = row;
            square.dataset.col = col;

            let piece = board[row][col];
            if (piece) square.textContent = pieces[piece];

            square.addEventListener("click", onSquareClick);

            boardElement.appendChild(square);
        }
    }
}

function onSquareClick(e) {
    const row = Number(e.target.dataset.row);
    const col = Number(e.target.dataset.col);

    if (!selectedSquare) {
        const piece = board[row][col];
        if (!piece) return;

        if (!isCurrentPlayersPiece(piece)) return;

        selectedSquare = {row, col};
        e.target.classList.add("selected");

    } else {
        movePiece(selectedSquare.row, selectedSquare.col, row, col);
        selectedSquare = null;
        drawBoard();
    }
}

function isCurrentPlayersPiece(piece) {
    if (currentPlayer === "white") return piece === piece.toUpperCase();
    return piece === piece.toLowerCase();
}

function movePiece(fromRow, fromCol, toRow, toCol) {

    const piece = board[fromRow][fromCol];

    if (!isValidMove(piece, fromRow, fromCol, toRow, toCol)) return;

    board[toRow][toCol] = piece;
    board[fromRow][fromCol] = "";

    currentPlayer = currentPlayer === "white" ? "black" : "white";
    statusText.textContent = `${capitalize(currentPlayer)}'s turn`;
}

function isValidMove(piece, fr, fc, tr, tc) {

    const target = board[tr][tc];

    if (target && isSameColor(piece, target)) return false;

    const dr = tr - fr;
    const dc = tc - fc;

    switch(piece.toLowerCase()) {

        case "p":
            const direction = piece === "P" ? -1 : 1;
            if (dc === 0 && !target && dr === direction) return true;
            if (Math.abs(dc) === 1 && dr === direction && target) return true;
            return false;

        case "r":
            return fr === tr || fc === tc;

        case "n":
            return (Math.abs(dr) === 2 && Math.abs(dc) === 1) ||
                   (Math.abs(dr) === 1 && Math.abs(dc) === 2);

        case "b":
            return Math.abs(dr) === Math.abs(dc);

        case "q":
            return fr === tr || fc === tc || Math.abs(dr) === Math.abs(dc);

        case "k":
            return Math.abs(dr) <= 1 && Math.abs(dc) <= 1;
    }

    return false;
}

function isSameColor(p1, p2) {
    return (p1 === p1.toUpperCase()) === (p2 === p2.toUpperCase());
}

function capitalize(word) {
    return word.charAt(0).toUpperCase() + word.slice(1);
}

drawBoard();
</script>

</body>
</html>
